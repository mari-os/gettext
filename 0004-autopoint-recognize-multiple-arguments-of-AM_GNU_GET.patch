From b78c093168bd919d7058be09ac6bfc77dd145dcd Mon Sep 17 00:00:00 2001
From: Daiki Ueno <ueno@gnu.org>
Date: Tue, 24 Sep 2013 12:51:16 +0900
Subject: [PATCH 4/8] autopoint: recognize multiple arguments of AM_GNU_GETTEXT
 when tracing

---
 gettext-tools/misc/ChangeLog     | 8 ++++++++
 gettext-tools/misc/autopoint.in  | 2 ++
 gettext-tools/misc/gettextize.in | 2 ++
 3 files changed, 12 insertions(+)

diff --git a/gettext-tools/misc/ChangeLog b/gettext-tools/misc/ChangeLog
index ea9134c..6352518 100644
--- a/gettext-tools/misc/ChangeLog
+++ b/gettext-tools/misc/ChangeLog
@@ -1,3 +1,11 @@
+2013-09-24  Daiki Ueno  <ueno@gnu.org>
+
+	* autopoint.in: Recognize multiple arguments of AM_GNU_GETTEXT
+	when tracing.
+	* gettextize.in: Likewise.
+	Reported by Gary V. Vaughan in
+	<http://savannah.gnu.org/bugs/?40082>.
+
 2013-08-12  Daiki Ueno  <ueno@gnu.org>
 
 	autopoint: make macro trace in autom4te robuster
diff --git a/gettext-tools/misc/autopoint.in b/gettext-tools/misc/autopoint.in
index 51f8551..2c03562 100644
--- a/gettext-tools/misc/autopoint.in
+++ b/gettext-tools/misc/autopoint.in
@@ -350,12 +350,14 @@ fi
 # Check whether to omit the intl/ directory.
 omitintl=
 xargs=`func_trace AM_GNU_GETTEXT "$configure_in"`
+save_IFS="$IFS"; IFS=:
 for arg in $xargs; do
   if test 'external' = "$arg"; then
     omitintl=yes
     break
   fi
 done
+IFS="$save_IFS"
 
 # Check in which directory or directories the po/* infrastructure belongs.
 configfiles=`func_trace AC_CONFIG_FILES "$configure_in"`
diff --git a/gettext-tools/misc/gettextize.in b/gettext-tools/misc/gettextize.in
index 6278a3d..be837b9 100644
--- a/gettext-tools/misc/gettextize.in
+++ b/gettext-tools/misc/gettextize.in
@@ -675,12 +675,14 @@ else
   # Tell the user what to put into configure.ac, if it is not already there.
   external=
   xargs=`func_trace AM_GNU_GETTEXT "$srcdir/$configure_in"`
+  save_IFS="$IFS"; IFS=:
   for arg in $xargs; do
     if test 'external' = "$arg"; then
       external=yes
       break
     fi
   done
+  IFS="$save_IFS"
   if test -z "$external"; then
     please="$please
 Please use AM_GNU_GETTEXT([external]) in order to cause autoconfiguration
-- 
1.8.3.4

